(this["webpackJsonpsoroban-simulator-js"]=this["webpackJsonpsoroban-simulator-js"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),s=n(1),i=n.n(s),r=(n(13),n(2)),o=n(3),c=n(5),u=n(4),h=n(6),p=(n(14),n(21)),m={entering:{transition:"all 200ms ease",marginTop:-25},entered:{transition:""},exiting:{transition:"all 200ms ease",marginTop:25},exited:{transition:""}},d=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).tableCellStyle={border:"4px #ca7d45 solid",height:24,borderTop:"0px",borderBottom:"0px"},n.tableCellSeparaterStyle={border:"4px #ca7d45 solid",height:24,borderTop:"0px",borderBottom:"10px #C0C0C0 solid"},n.upStyle={marginTop:-25},n.defaultStyle={marginTop:0},n.state={cells:e.cells,cellStyle:n.defaultStyle},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={onEnter:function(){return e.setState({cellStyle:e.defaultStyle})},onEntered:function(){return e.setState({cellStyle:e.upStyle})},onExit:function(){return e.setState({cellStyle:e.upStyle})},onExited:function(){return e.setState({cellStyle:e.defaultStyle})}},n=this.props.tama?"tama icon":this.props.teiiten?"teiiten icon":null,a=this.props.separater?this.tableCellSeparaterStyle:this.tableCellStyle;return l.a.createElement(p.a,Object.assign({in:this.state.cells[this.props.index],timeout:200},t),(function(t){return l.a.createElement("td",{style:a},l.a.createElement("div",{style:e.state.cellStyle},l.a.createElement("div",{style:m[t]},l.a.createElement("div",{className:n,onMouseOver:function(n){e.props.tama&&e.props.isEnableTouch()&&0!==n.buttons&&("entered"!==t&&"exited"!==t||e.props.changeCell(e.props.index))},onMouseDown:function(){e.props.tama&&e.props.isEnableTouch()&&("entered"!==t&&"exited"!==t||e.props.changeCell(e.props.index))}}))))}))}}]),t}(l.a.Component),f=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).textInput=l.a.createRef(),n.hide={display:"none"},n.show={display:""},n.state={input:!1},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.input&&t.input}},{key:"render",value:function(){var e=this,t=!1;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:this.state.input?this.show:this.hide},l.a.createElement("input",{type:"number",style:{imeMode:"disabled"},ref:function(t){e.textInput=t},placeholder:this.props.amountValue.toLocaleString(),className:"amount",onBlur:function(n){e.setState({input:!1}),t=!1},onMouseEnter:function(n){t||(e.textInput.focus(),t=!0)},onChange:function(){e.props.calc(e.textInput.value)}})),l.a.createElement("div",{style:this.state.input?this.hide:this.show},l.a.createElement("div",{className:"amount",onMouseDown:function(t){e.setState({input:!0}),e.textInput.value=e.props.amountValue}},this.props.amountValue.toLocaleString())))}}]),t}(l.a.Component),v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={amountValue:0,cells:Array(7*e.length).fill(!1)},n.cellComponents=[],n.tableStyle={border:"16px #5a2a08 solid",borderLeft:"32px #5a2a08 solid",borderRight:"32px #5a2a08 solid",width:48*e.length},n.length=e.length,n.enableTouch=!1,n.isEnableTouch=function(){return n.enableTouch},n.changeCell=function(e){var t=n.state.cells,a=!t[e];if(t[e]=a,a)for(var l=e,s=3*n.length;l>s;)t[l]=a,l-=n.length;else if(e>2*n.length)for(var i=e,r=t.length;i<r;)t[i]=a,i+=n.length;n.setState({cells:t}),n.calcValue()},n.setPositionByNumber=function(e){for(var t,a=n.state.cells,l=0;l<n.state.cells.length;l++)a[l]=(t=l,2*n.length>t);var s=e.split(""),i=Math.ceil(n.props.length/2);if(s.length<i)for(var r=i-s.length,o=0;o<s.length;++o){var c=parseInt(s[o]);c>=5&&(a[r+n.props.length+o]=!1,c-=5);for(var u=0;u<c;++u)a[r+n.props.length*(u+3)+o]=!0}n.setState({cells:a}),n.calcValue()},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"renderCells",value:function(e){for(var t=[],n=e.num-1,a=0;a<n;a++){var s=e.index*e.num+a,i=Math.floor(n/2)-a,r=Math.pow(10,Math.abs(i))*(i>=0?1:-1);t.push(l.a.createElement(d,{key:s,index:s,value:e.value,digit:r,tama:e.tama,teiiten:e.teiiten&&1===r,separater:e.sep,cells:this.state.cells,changeCell:this.changeCell,isEnableTouch:this.isEnableTouch}))}var o=e.index*e.num+e.num;return t.push(l.a.createElement(d,{key:o,index:o,value:0,digit:0,tama:!1,separater:e.sep,cells:this.state.cells,changeCell:this.changeCell})),this.cellComponents[e.index]=t,l.a.createElement("tr",null,t)}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){for(var t,n=e.state.cells,a=0;a<e.state.cells.length;a++)if(t=a,2*e.length>t&&!n[a])return n[a]=!0,void e.setState({cells:n});e.enableTouch=!0,clearInterval(e.timerID)}),20)}},{key:"resetZeroPosition",value:function(){for(var e,t=this,n=this.state.cells,a=0;a<this.state.cells.length;a++)n[a]=(e=a,2*t.length>e);this.setState({cells:n}),this.calcValue()}},{key:"calcValue",value:function(){for(var e=0,t=0;t<this.cellComponents.length;++t)for(var n=0;n<this.cellComponents[t].length;++n){var a=this.cellComponents[t][n].props,l=this.state.cells[this.length*t+n];if("undefined"!==typeof a.tama){var s=a.digit*a.value;5===a.value?e+=l?0:s:1===a.value&&(e+=l?s:0)}}this.setState({amountValue:e})}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{style:this.tableStyle},l.a.createElement("tbody",null,this.renderCells({index:0,num:this.props.length}),this.renderCells({index:1,num:this.props.length,sep:!0,tama:!0,value:5}),this.renderCells({index:2,num:this.props.length,teiiten:!0}),this.renderCells({index:3,num:this.props.length,tama:!0,value:1}),this.renderCells({index:4,num:this.props.length,tama:!0,value:1}),this.renderCells({index:5,num:this.props.length,tama:!0,value:1}),this.renderCells({index:6,num:this.props.length,tama:!0,value:1}))),l.a.createElement("div",{className:"amount-value-area"},l.a.createElement(f,{amountValue:this.state.amountValue,calc:this.setPositionByNumber})),l.a.createElement("div",{className:"btn-area"},l.a.createElement("button",{className:"btn-square-little-rich",onClick:function(){return e.resetZeroPosition()}},"RESET ZERO")))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(v,{length:23}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports=n(18)}},[[8,1,2]]]);
//# sourceMappingURL=main.2a54d2e2.chunk.js.map